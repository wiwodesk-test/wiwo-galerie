<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WirtschaftsWoche Galerie</title>
    <style>
        /* Inline critical CSS to show loading screen immediately */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #111111 0%, #1a1a1a 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s ease-out;
        }

        .loading-content {
            text-align: center;
            color: #C5A059;
            font-family: 'Playfair Display', serif;
        }

        .logo {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            letter-spacing: 2px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid rgba(197, 160, 89, 0.3);
            border-radius: 50%;
            border-top-color: #C5A059;
            animation: spin 1s ease-in-out infinite;
            margin: 0 auto 20px;
        }

        .loading-text {
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            letter-spacing: 1px;
            opacity: 0.8;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        body {
            margin: 0;
            overflow: hidden;
            background: #111;
        }
    </style>
    <!-- WiWo Design System Fonts -->
    <link rel="stylesheet" href="https://designsystem.hmgassets.com/fonts/wiwo/styles.css">
    <link rel="stylesheet" href="style.css">

    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/renderers/CSS3DRenderer.js"></script>

    <!-- Post-Processing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/SSAOPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/SSAOShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/SimplexNoise.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>

    <!-- WiWo Design System Web Components Loader -->
    <script type="module">
        (async () => {
            try {
                const loader = await import('https://designsystem.hmgassets.com/webcomponents/loader.js');
                const webcomponentApp = await loader.getWebComponents({ prefix: 'wiwo' });
                await webcomponentApp.loadComponents(['theme-wiwo', 'rich-text', 'title', 'logo-wiwo', 'button', 'headline', 'lead-text', 'icon']);
                console.log('✅ WiWo Design System loaded successfully');
            } catch (error) {
                console.warn('⚠️ WiWo Design System failed to load:', error);
            }
        })();
    </script>
</head>

<body>
    <wiwo-theme-wiwo theme-mode="dark">
        <!-- Loading Screen -->
        <div id="loading-screen">
            <div class="loading-content">
                <wiwo-logo-wiwo style="width: 200px; height: auto;"></wiwo-logo-wiwo><br><br>
                <div class="spinner"></div>
                <div class="loading-text">Lade Galerie ...</div>
            </div>
        </div>

        <!-- Welcome Screen -->
        <div id="welcome-screen" class="hidden">
            <div class="welcome-content">
                <div style="margin-bottom: 30px;">
                    <wiwo-logo-wiwo style="width: 200px; height: auto;"></wiwo-logo-wiwo>
                </div>
                <wiwo-title size="small">100 Jahre WirtschaftsWoche</wiwo-title>
                <wiwo-lead-text>Die WirtschaftsWoche feiert 100-jähriges Jubiläum.<br>Schauen Sie 100 Cover aus unserer
                    Geschichte an.</wiwo-lead-text>

                <div class="instruction-container desktop-only">
                    <div class="icon-box">
                        <!-- CSS/SVG Arrow Keys -->
                        <svg width="100" height="60" viewBox="0 0 100 60" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <rect x="35" y="0" width="30" height="30" rx="4" stroke="#C5A059" stroke-width="2" />
                            <path d="M50 10L50 20M50 10L45 15M50 10L55 15" stroke="#C5A059" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />

                            <rect x="0" y="35" width="30" height="25" rx="4" stroke="#C5A059" stroke-width="2" />
                            <path d="M15 47L5 47M5 47L10 42M5 47L10 52" stroke="#C5A059" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />

                            <rect x="35" y="35" width="30" height="25" rx="4" stroke="#C5A059" stroke-width="2" />
                            <path d="M50 42L50 52M50 52L45 47M50 52L55 47" stroke="#C5A059" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />

                            <rect x="70" y="35" width="30" height="25" rx="4" stroke="#C5A059" stroke-width="2" />
                            <path d="M85 47L95 47M95 47L90 42M95 47L90 52" stroke="#C5A059" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                    <wiwo-lead-text>Nutzen Sie die Pfeiltasten zur Navigation</wiwo-lead-text>
                </div>

                <div class="instruction-container mobile-only">
                    <div class="icon-box">
                        <!-- CSS/SVG Joystick -->
                        <svg width="60" height="60" viewBox="0 0 60 60" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="30" cy="30" r="28" stroke="#C5A059" stroke-width="2" stroke-dasharray="4 4" />
                            <circle cx="30" cy="30" r="12" fill="#C5A059" fill-opacity="0.2" stroke="#C5A059"
                                stroke-width="2" />
                            <circle cx="30" cy="30" r="4" fill="#C5A059" />
                        </svg>
                    </div>
                    <p class="instruction-text">Nutzen Sie den Joystick zur Navigation</p>
                </div>

                <wiwo-button id="start-btn" appearance="primary-brand">Starten</wiwo-button>
                <div style="margin-top: 20px; opacity: 0.6;">
                    <a href="https://www.wiwo.de/impressum" target="_blank"
                        style="color: white; text-decoration: none; font-size: 0.9rem; border-bottom: 1px dotted rgba(255,255,255,0.5);">Impressum</a>
                </div>
            </div>
        </div>

        <!-- First Success Screen -->
        <div id="first-success-screen" class="hidden">
            <div class="welcome-content">
                <wiwo-button icon="emoji-happy" size="medium" appearance="primary-brand" hide-label="right">Icon
                    Only</wiwo-button><br><br>
                <wiwo-title size="small">Erste Aktion gelungen</wiwo-title>
                <br>
                <wiwo-lead-text>
                    Sie haben herausgefunden, wie Sie navigieren können.<br><br>
                    Finden Sie jetzt das erste Cover unserer Geschichte.<br> Tipp: Damals hießen wir "Der deutsche
                    Volkswirt"
                </wiwo-lead-text>
                <br><br>
                <wiwo-button id="continue-btn" appearance="primary-brand">Weiter</wiwo-button>
            </div>
        </div>

        <!-- Achievement Screen -->
        <div id="achievement-screen" class="hidden">
            <div class="welcome-content">
                <wiwo-button icon="emoji-happy" size="medium" appearance="primary-brand" hide-label="right">Icon
                    Only</wiwo-button><br><br>
                <wiwo-title size="small">Erstausgabe gefunden!</wiwo-title>
                <br>
                <wiwo-lead-text>
                    Sie haben die allererste Ausgabe entdeckt.<br><br>
                    Bewegen Sie sich näher, um sie anzuschauen.<br><br>
                    Schauen Sie sich danach doch noch ein paar weitere an!
                </wiwo-lead-text>
                <br><br>
                <wiwo-button id="achievement-continue-btn" appearance="primary-brand">Weiter</wiwo-button>
            </div>
        </div>

        <!-- Light Success Screen -->
        <div id="light-success-screen" class="hidden">
            <div class="welcome-content">
                <wiwo-button icon="emoji-happy" size="medium" appearance="primary-brand" hide-label="right">Icon
                    Only</wiwo-button><br><br>
                <wiwo-title size="small">Lichtschalter gefunden</wiwo-title>
                <br>
                <wiwo-lead-text>
                    Ein kleiner Spaß, Sie können ihn gerne drücken.
                </wiwo-lead-text>
                <br><br>
                <wiwo-button id="light-continue-btn" appearance="primary-brand">Weiter</wiwo-button>
            </div>
        </div>

        <!-- Five Covers Screen -->
        <div id="five-covers-screen" class="hidden">
            <div class="welcome-content">
                <wiwo-button icon="emoji-happy" size="medium" appearance="primary-brand" hide-label="right">Icon
                    Only</wiwo-button><br><br>
                <wiwo-title size="small">Fünf Cover betrachtet</wiwo-title>
                <br>
                <wiwo-lead-text>
                    Großartig! Sie haben fünf Titelseiten genauer angesehen.<br><br>
                    Schauen Sie sich noch weiter um, es gibt<br>
                    noch mehr zu entdecken.
                </wiwo-lead-text>
                <br><br>
                <wiwo-button id="five-covers-continue-btn" appearance="primary-brand">Weiter</wiwo-button>
            </div>
        </div>

        <!-- Floor Success Screen -->
        <div id="floor-success-screen" class="hidden">
            <div class="welcome-content">
                <wiwo-button icon="emoji-happy" size="medium" appearance="primary-brand" hide-label="right">Icon
                    Only</wiwo-button><br><br>
                <wiwo-title size="small">1. Etage erreicht!</wiwo-title>
                <br>
                <wiwo-lead-text>
                    Sie haben die erste Etage erreicht. Hier gibt es keine Cover, aber gucken Sie ein Video, hören Sie
                    einen Podcast
                    –<br><br>
                    und finden Sie einen Schatz!
                </wiwo-lead-text>
                <br><br>
                <wiwo-button id="floor-continue-btn" appearance="primary-brand">Weiter</wiwo-button>
            </div>
        </div>

        <!-- Treasure Screen -->
        <div id="treasure-screen" class="hidden">
            <div class="welcome-content">
                <wiwo-button icon="emoji-happy" size="medium" appearance="primary-brand" hide-label="right">Icon
                    Only</wiwo-button><br><br>
                <wiwo-title size="small">Schatztruhe geöffnet</wiwo-title>
                <br>
                <wiwo-lead-text>
                    Sie haben die Truhe geöffnet und ein kleines Geschenk entdeckt!<br><br>
                    Prozent Rabatt</strong> auf alle Produkte.
                    Nutzen Sie den Rabattcode <strong>WiWo_100</strong> für Ihren Einkauf und erhalten Sie <strong>20
                        Prozent</strong> Rabatt auf alle Produkte.
                </wiwo-lead-text>
                <br>
                <div
                    style="background: rgba(197, 160, 89, 0.2); padding: 15px; border: 1px solid #C5A059; margin-bottom: 20px; display: inline-block;">
                    <span
                        style="font-family: monospace; font-size: 1.5rem; color: #fff; letter-spacing: 2px;">WiWo_100</span>
                </div>
                <br>
                <wiwo-button id="treasure-shop-btn" appearance="primary-brand" href="http://shop-wirtschaftswoche.de/"
                    target="_blank">Zum Shop</wiwo-button>
                <br>
                <br>
                <wiwo-button id="treasure-continue-btn" appearance="secondary">Weiter erkunden</wiwo-button>
            </div>
        </div>

        <!-- Final Screen -->
        <div id="final-screen" class="hidden">
            <div class="welcome-content">
                <wiwo-button icon="emoji-happy" size="medium" appearance="primary-brand" hide-label="right">Icon
                    Only</wiwo-button><br><br>
                <wiwo-title size="small">Alle Titelseiten betrachtet!</wiwo-title>
                <br>
                <wiwo-lead-text>
                    Hut ab vor dieser Leistung, jetzt sind Sie ein WiWo-Profi!<br>
                </wiwo-lead-text>
                <br><br>
                <wiwo-button id="final-continue-btn" appearance="primary-brand">Geschafft!</wiwo-button>
            </div>
        </div>

        <iframe id="video-screen" width="1280" height="720" src="" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen style="display: none;"></iframe>
        <button id="video-close-btn" class="hidden">&times;</button>

        <div id="ui-layer">
            <div id="info-panel">
                <wiwo-title size="small">WiWo Galerie</wiwo-title>
                <wiwo-rich-text size="small">Nutzen Sie die <strong>Pfeiltasten</strong> zum
                    Bewegen.</wiwo-rich-text>
                <wiwo-rich-text size="small"><strong>Enter</strong> für Aktionen, <strong>Esc</strong> für
                    Mauszeiger.</wiwo-rich-text>
                <div style="margin-top: 10px; opacity: 0.7;">
                    <a href="https://www.wiwo.de/impressum" target="_blank"
                        style="color: white; text-decoration: none; font-size: 0.8rem; border-bottom: 1px dotted rgba(255,255,255,0.5);">Impressum</a>
                </div>
            </div>

            <div id="stats-panel">
                <wiwo-rich-text size="small" class="stat-label">Betrachtete Titelseiten</wiwo-rich-text>
                <wiwo-title size="small" class="stat-value" id="completion-rate">0%</wiwo-title>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>

                <div class="achievements">
                    <div class="achievement" id="achievement-first">
                        <span class="achievement-check">☐</span>
                        <span class="achievement-text">Erstausgabe gefunden</span>
                    </div>
                    <div class="achievement" id="achievement-five">
                        <span class="achievement-check">☐</span>
                        <span class="achievement-text">Fünf Titel betrachtet</span>
                    </div>
                    <div class="achievement" id="achievement-light">
                        <span class="achievement-check">☐</span>
                        <span class="achievement-text">Lichtschalter gefunden</span>
                    </div>
                    <div class="achievement" id="achievement-floor">
                        <span class="achievement-check">☐</span>
                        <span class="achievement-text">1. Etage gefunden</span>
                    </div>
                    <div class="achievement" id="achievement-treasure">
                        <span class="achievement-check">☐</span>
                        <span class="achievement-text">Schatztruhe geöffnet</span>
                    </div>
                    <div class="achievement" id="achievement-all">
                        <span class="achievement-check">☐</span>
                        <span class="achievement-text">Alle Titel betrachtet</span>
                    </div>
                </div>
            </div>

            <div id="cover-overlay" class="hidden">
                <div class="overlay-content">
                    <button id="close-btn" icon="close">&times;</button>
                    <div id="overlay-image-container"></div>
                    <div id="overlay-info">
                        <wiwo-title id="overlay-title">Titelseite</wiwo-title>
                        <wiwo-rich-text size="medium" id="overlay-desc">Hier steht die Beschreibung zur
                            Titelseite.</wiwo-rich-text>
                    </div>
                </div>
            </div>

            <button id="interaction-prompt" class="hidden">Ansehen</button>

            <div id="mobile-controls">
                <div id="joystick-zone" class="joystick-zone">
                    <div class="joystick-label">Zum Laufen ziehen</div>
                    <div class="joystick-base">
                        <div class="joystick-stick" id="joystick-stick"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="canvas-container"></div>

        <script src="covers-data.js"></script>
        <script src="script.js"></script>
    </wiwo-theme-wiwo>
</body>

</html>
